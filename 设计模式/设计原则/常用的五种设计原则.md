# 五种设计原则



## 单一职责原则



### 原理

一个类只应该有一个职责。



### 优点

这样子会让类更加高内聚、低耦合。如果一个类承担了很多职责，那么修改一个职责的代码，可能会导致其他职责代码出现问题。





## 开放封闭原则



### 原理

类应该对扩展开放，对修改关闭。

- 对扩展开放：如果出现新的需求，可以对现有代码进行扩展，以适应新的情况。
- 对修改关闭：类一旦设计完成，就不要对类进行任何修改。



需求总是在变化的，如何在不需要对原有代码进行修改的情况下，对系统进行扩展，而实现新的需求呢？

核心在于依赖抽象：

- 让类依赖于抽象，抽象是比较稳定了，所以对修改封闭。
- 通过继承和多态机制，继承父类，重写父类方法来改变方法的行为，从而实现新的需求。也就是我们说的“对扩展开放“。
- ![image-20200726155059799](https://tva1.sinaimg.cn/large/007S8ZIlgy1gh4fbzgfs9j315e0f0n2k.jpg)





### 优点

如果去修改一个类，那么就可能导致其他依赖被修改类的类出现bug。也就是避免修改代码导致依赖方出现bug。







## 依赖倒置原则



### 原理

抽象不应该依赖细节，细节应该依赖抽象。简单来说，我们应该针对接口编程，而不是针对实现编程。



反面例子UML图：

![image-20200726155510480](https://tva1.sinaimg.cn/large/007S8ZIlgy1gh4fgafilyj30d603e0t4.jpg)

缺点：高层模块太依赖低层模块，耦合太紧密。低层模块发生变化会影响到高层模块。

解决方法：利用依赖倒置原则使高层模块和低层模块都依赖于抽象(接口或抽象类)。

修改后的UML图如下：

<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gh4fh8o2kqj30du09at9q.jpg" alt="image-20200726155602174" style="zoom:67%;" />



### 优点

这样的话修改低层模块不会影响到高层模块，减小了它们之间的耦合度，增强系统的稳定性。





**为什么叫做倒置？**

比如人吃巧克力，人有对巧克力的依赖关系，但是这种自然的依赖关系在软件工程中是不适合的，所以就需要将依赖关系倒置为巧克力对"食物"这个接口的依赖，人也依赖于”食物“这个接口。 

总结来说：就是上层依赖于抽象，下层也反过来依赖于抽象，所以叫做倒置。

![image-20200726160508905](https://tva1.sinaimg.cn/large/007S8ZIlgy1gh4fqo0je4j30p205adfz.jpg)



<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gh4fpxapvbj30qw0humy4.jpg" alt="image-20200726160425903" style="zoom:67%;" />













## 里氏替换原则



### 原理

父类在代码中出现的地方，子类都可以替换掉。

实例UML图：

![image-20200726160928363](https://tva1.sinaimg.cn/large/007S8ZIlgy1gh4fv62gxnj30ts0b4q62.jpg)



### 优点

- 增加新的功能的时候，不用修改客户端的代码，只要替换掉对应的子类即可。可以在不修改已有代码的情况下，实现新的需求。
- 子类共享父类的代码和功能，提高代码的重用性。



### 缺点

使用继承实现，父类改变，子类可能会受到影响。





## 迪米特法则



### 原理

一个对象应该对其他对象有最少的了解。

怎么做呢？

- 尽量少的对外暴露方法
- 只和直接朋友交流
  - 直接朋友就是指成员变量、方法出参、入参的类。



### 优点

**降低类之间的耦合**。由于每个对象尽量减少对其他对象的了解，因此，很容易使得系统的功能模块功能独立，相互之间不存在（或很少有）依赖关系。





## 参考

[设计模式—五大设计原则](https://www.cnblogs.com/qilezaitu/articles/3806981.html)

[依赖倒置原则](https://www.jianshu.com/p/4e268c90e720)

[迪米特法则](https://www.jianshu.com/p/4b244f132439)

